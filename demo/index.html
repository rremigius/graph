<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">

		<script src="../dist/graph.js"></script>
		<style>
			body {
				padding: 0;
				margin: 0;
			}
			#graph {
				height: 100%;
			}
		</style>
	</head>
	<body>
		<div id="graph"></div>

		<script src="./data.js"></script>
		<script type="text/javascript">
			(async function() {
				const Graph = window.Graph;
				class MyGraph extends Graph {
					getElementData(entity) {
						const data = entity.data ? entity.data.$export() : {};
						data.label = Graph.getLabel(entity);
						return data;
					}
				}
				const style = Graph.cytoscape.stylesheet()
					.selector('node').style('label', ele => ele.data('label'))
					.selector('edge').style('label', ele => ele.data('label'));

				const graph = new MyGraph({
					container: document.getElementById('graph'),
					style: style
				});
				await graph.initialized;
				graph.setData(DATA);
				setTimeout(()=>{
					const node1 = graph.model.nodes.add({labels: ['Test']});
					const node2 = graph.model.nodes.add({labels: ['Test']});
					const rel = graph.model.relations.add({
						labels: 'TEST',
						source: {gid: node1.gid},
						target: {gid: node2.gid}
					})
				},3000);
				console.log(graph.model);
			})();
		</script>
	</body>
</html>